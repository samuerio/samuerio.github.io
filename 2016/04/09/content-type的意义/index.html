<!doctype html>

<html>
    <head>
        <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet"  />

<link href="/css/main.css?v=5.0.1" rel="stylesheet"  />


  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />

        <title> content-type影响request.getParameter获取数据 | issUn </title>
    </head>
    <body itemscope itemtype='http://schema.org/WebPage' lang='zh-Hans' >
        
        <div class='container  =' >
           

           

            <main id='main' class='main'>
                <div class='main-inner'>
                    <div class='content-wrap'>
                        <div id='content' class='content'>
                            

  <div id="posts" class="posts-expand">
    

    
    <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article" >
        <header class="post-header" >
            <div class="icon"></div>
            <time datetime="2016-04-09T09:45:37.000Z">
                <a href="/2016/04/09/content-type的意义/">2016-04-09</a>
            </time>
            <h1 class="post-title" itemprop="name headline" >
                <a class="post-title-link" href="/2016/04/09/content-type的意义/" itemprop="url" >
                    content-type影响request.getParameter获取数据
                </a>
            </h1>
            <!--
                <div class="post-meta">
                    <span class="post-time" >
                        <span class="post-meta-item-icon">
                            <i class="fa fa-calendar-o"></i>
                        </span>
                        <span class="post-meta-iterm-text">发表于</span>
                        <time itemprop="dateCreated" datetime="2016-04-09T17:45:37+08:00" content="2016-04-09" >
                            2016-04-09
                        </time>
                    </span>
                    
                        
                            <span class="post-comments-count">
                                &nbsp; | &nbsp
                                <a href="/2016/04/09/content-type的意义/#comments" itemprop="discussionUrl" >
                                     <span class="post-comments-count ds-thread-count" data-thread-key="2016/04/09/content-type的意义/" itemprop="commentsCount"></span>
                                </a>
                            </span>
                        
                    
                    
                    
                </div>
            -->
        </header>
        <div class="post-body" itemprop="articleBody">
            
                <p><a href="http://tool.oschina.net/commons" target="_blank" rel="external">Content-type</a>决定了文件类型以及数据的展示方式</p>
<blockquote>
<p>The purpose of the Content-Type field is to describe the data contained in the body fully enough that the receiving user agent can pick an appropriate agent or mechanism to present the data to the user, or otherwise deal with the data in an appropriate manner.<br>content-type</p>
</blockquote>
<p>Get请求的数据是附着在URL后（即位于HTTP协议头部），而Post提交的数据是放于HTTP包的包体。故content-type只会影响到Post提交的数据。</p>
<a id="more"></a>
<h3 id="application-x-www-form-urlencoded"><a href="#application-x-www-form-urlencoded" class="headerlink" title="application/x-www-form-urlencoded"></a>application/x-www-form-urlencoded</h3><p>application/x-www-form-urlencoded为「表单提交」，默认的<code>Ajax Post</code>提交也是按这种方式。</p>
<h3 id="application-json"><a href="#application-json" class="headerlink" title="application/json"></a>application/json</h3><p>这种时候，只能从HTTP内容体里面获取提交的数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(actionUrl,&#123;</span><br><span class="line">                      method:<span class="string">'POST'</span>,</span><br><span class="line">                      data:<span class="built_in">JSON</span>.stringify(postData),<span class="comment">//这里必须序列化为JSON字符串</span></span><br><span class="line">                      contentType:<span class="string">'application/json; charset=utf-8'</span>,</span><br><span class="line">                      dataType:<span class="string">'json'</span>,</span><br><span class="line">                      success:<span class="function"><span class="keyword">function</span>(<span class="params">rs</span>)</span>&#123;</span><br><span class="line">                          <span class="keyword">if</span>(rs.success)&#123;</span><br><span class="line">                              resolve(rs.content);</span><br><span class="line">                          &#125;</span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">readStringFromRequest</span><span class="params">(HttpServletRequest request,String encode)</span></span>&#123;</span><br><span class="line">	StringBuffer json = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">	InputStream in = <span class="keyword">null</span>;</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		in = request.getInputStream();</span><br><span class="line">		InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(in,encode);</span><br><span class="line">		BufferedReader bufferReader = <span class="keyword">new</span> BufferedReader(isr);</span><br><span class="line">		</span><br><span class="line">		String line = bufferReader.readLine();</span><br><span class="line">		<span class="keyword">if</span>(StringUtils.isEmpty(line))&#123;</span><br><span class="line">			line = <span class="string">""</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		do&#123;</span><br><span class="line">			json.append(line);</span><br><span class="line">			line = bufferReader.readLine();</span><br><span class="line">			<span class="keyword">if</span>(line != <span class="keyword">null</span>)&#123;</span><br><span class="line">				json.append(<span class="string">"\n"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">while</span>(line != <span class="keyword">null</span>);</span><br><span class="line">	&#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

            
        </div>
        <footer class="post-footer">
             
        </footer>
    </article>

  </div>


                        </div>
                        
                    </div>
                    
                        
  
    <aside class="sidebar">
        <div class="sidebar-inner">
            <a class='sidebar-btn-archives' href='/archives' title='存档' ></a>
            <a class='sidebar-btn-home' href='/' title='首页' ></a>
            <div class='author'>
                <div class='author-img'></div>
                <div class='author-socialInfo'>
                
                    <a href="https://github.com/samuerio" target="_blank" class="icon-github" title="github"></a>
                
                
                    <a href="mailto:zhenghe39@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
                
                </div>
            </div>
            
                <div class='categorieslist'>
                    <p class='sidebar-title'>分类</p>
                    <ul>
                        
                            
                                <li class="categorieslist-item">
                                    <a  href="/categories/参考资料/" title="参考资料">参考资料</a>
                                </li>
                            
                        
                            
                                <li class="categorieslist-item">
                                    <a  href="/categories/电影日常/" title="电影日常">电影日常</a>
                                </li>
                            
                        
                            
                                <li class="categorieslist-item">
                                    <a  href="/categories/精选转载/" title="精选转载">精选转载</a>
                                </li>
                            
                        
                            
                                <li class="categorieslist-item">
                                    <a  href="/categories/编程札记/" title="编程札记">编程札记</a>
                                </li>
                            
                        
                    </ul>
                </div>
            
            
                <div class="tagslist" >
                    <p class="sidebar-title">标签</p>
                    <ul>
                        
                        
                            
                                <li class="tagslist-item">
                                    <a  href='/tags/Javascript/' title=Javascript>Javascript</a>
                                </li>
                            
                        
                            
                                <li class="tagslist-item">
                                    <a  href='/tags/Css/' title=Css>Css</a>
                                </li>
                            
                        
                            
                                <li class="tagslist-item">
                                    <a  href='/tags/Http/' title=Http>Http</a>
                                </li>
                            
                        
                            
                                <li class="tagslist-item">
                                    <a  href='/tags/Oracle/' title=Oracle>Oracle</a>
                                </li>
                            
                        
                            
                                <li class="tagslist-item">
                                    <a  href='/tags/JSON/' title=JSON>JSON</a>
                                </li>
                            
                        
                    </ul>
                 </div>
            
        </div>
    </aside>


                    
                </div>
            </main>




        </div>
        
    </body>

</html>